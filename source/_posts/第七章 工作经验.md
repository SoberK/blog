---
title: 提升 - 工作经验
date: 2022-08-13 10:24:31
category: 提升
tag: js
# password: 123789
# abstract: 这里有东西被加密了，需要输入密码查看哦。
# message: 您好，这里需要密码。
# wrong_pass_message: 抱歉，这个密码看着不太对，请再试试。
# wrong_hash_message: 抱歉，这个文章不能被纠正，不过您还是能看看解密后的内容。
---

#### 1、H5 页面如何进行首屏优化

- 路由懒加载
  - 使用 SPA
  - 路由拆分，首先保证首页加载
- 服务端 ssr
  - 传统前后台分离渲染过
  - Ssr 渲染页面过程简单，所有性能好
  - 如果是纯 H5 页面，ssr 是性能优化的中级方案
- App 预取
  - 如果 H5 在 App WebView 中展示，可使用 App 预取
  - 用户访问列表页时，App 预加载文章首屏内容
  - 用户进入 H5 页，直接从 App 中获取内容，瞬间展示首屏
- 分页
- 图片懒加载
  - 针对详情页
  - 默认值展示文本内容，让后触发图片的懒加载
  - 提前设置图片尺寸，尽量只重绘不重排
- Hybrid
  - 提前将 html、js、css 下载到 app 内部，
  - 在 app webview 中使用 file//:协议直接加载页面文件
  - 再用 ajax 获取内容并展示

#### 2、后端放回 10w 条数据，前端怎么展示

- 设计不合理，本省技术方案设计就不合理
- 主动和面试官共同此事
- 非要这么做，那么寻找解决方案
  - js 处理的话，dom 渲染会非常卡
  - 自定义中间层
  - 虚拟列表
    - 只渲染可是区域的 dom
    - 其他隐藏的区域不展示，只用 div 的高度
    - 随着滚动条的滚动控制展示，不在可是区域的不展示
    - 第三方控件
      - Vue-virtual-scroll-list
      - React-virtualiszed

#### 3、前端常用的设计模式有那些？并说明使用场景（javascript 设计模式系统讲解与应用）

- 设计原则

  - 最重要的思想：开放封闭原则
  - 对扩展开放
  - 对修改封闭

- 工厂模式

  - 用一个工厂函数，来创建实例，影藏 new

  - 如 jq 的$函数

  - ```
     class Foo{}
            function factory(a,b,c){
                return new Foo();
            }
            const f = factory(1,2,3)
    ```

- 单列模式

  - 全局唯一的实例（无法生成第二个）

  - 如 vuex、redux、store

  - 如全局唯一的 dialog model

    ```
    class SingleTon{
    	private static instance:SignleTon|null = null
    	private constructor(){}
    	public static getInstance(): SingleTon {
    		if(install){
    				return	this.instance
    		}
    		 this.instance  = new SingleTon()
    		 return this.instance
    	}
    	fn10(){}
    	fn20(){}
    }
    const s = SingleTon.getInstance()
    s.fn1()
    s. fn2()
    cost s1 = SingleTon.getInstance()
    c=== c1 //false
    ```

- 代理模式

  - Proxy
  - vue3 的设计就是一种场景

- 观察者模式

  - 一个主题，一个观察者，主题变后，触发观察者执行

- 发布订阅模式

  - ```
    event.on('event-key',()=>{})
    event.emit('event-key',()=>{})
    ```

- 装饰器模式

  - 员工能不变，增加一些新功能
  - es 和 typescript 的 Decorator

### 4、观察者模式和发布订阅模式之间的区别

![image-20220712144315734](/Users/fanrongkong/Library/Application Support/typora-user-images/image-20220712144315734.png)

- 观察者模式
  - Subject 和 Observer 直接绑定，没有中间媒介
  - 如 addeventListener
- 发布订阅
  - 是 publish 和 observer 互不相识，需要中间媒介
  - 如 eventBus

#### 5、你在实际工作中，做过那些 vue 优化

- v-if 和 v-show
- v-for 使用 key
- 使用 compted 缓存
- keep-alive 缓存组件
- 异步组件
- 路由懒加载
- 服务端渲染 ssr

#### 6、你在实际工作中，做过那些 vue 的坑

- 内存泄漏
  - 全局变量、全局事件、全局定时器、自定义时间没有销毁导致内存泄漏
- Vue2
  - data 新增要使用 vue.set
  - data 删除的时候要用 vue.delete
  - 无法直接修改数据，arr[index] = value
- 路由切换到 scroll 到顶部
  - spa 的通病
  - 如列表页，滚到第二屏幕，点击进入详情页
  - 在返回到列表也就 scroll 到顶部
    - 在列表缓存到 scroll 位置和数据，返回时候直接滚动到原来的位置
    - MPA+app webview

#### 7、如何统一监听 vue 的报错？

- window.onerror

  - 全局监听所有 js 错误

  - 但他是 js 级别的，识别不了 vue 组件信息

  - 捕捉一些 vue 监听不到的错误

- errorCaptured 生命周期

  - 监听所有下级组件的报错信息
  - 返回 false 不会想下级捕获

- erroHandler

  - app.config.errorHandler = ( error,vm,info)

#### 8、h5 很慢，你改如何排查新能问题

- 前端性能指标(performance)

  - first paint （FP）（第一次渲染）

  - First contentful paint（FCP）（第一次有内容的渲染）

  - first meaningful paint (已弃用，第一次有意义的渲染)

  - DomContentLoaded（DCL）

  - largest Contentful paint （LCP）

  - Load （L）

- Lighthouse

  ```
  npm i lighthouse -g
  lighthouse http://www.baidu.com --view --presst
  ```

- 分析是网页加载慢还是渲染慢

  - 网页加载慢
    - 优化服务器硬件配置，使用 cdn
    - 路由懒加载，大组建异步加载-减少主包的体积
    - 优化 http 缓存策略
  - 如果渲染慢
    - 优化服务端接口（如 Ajax 获取数据慢）
    - 继续分析，优化前端组件内部的逻辑（参考 Vue React 优化）
    - 服务端渲染 SSR

#### 9、准备一个开发遇到的问题

。。。。。
